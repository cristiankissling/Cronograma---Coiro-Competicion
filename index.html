<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coiro Competición · TCPK / TCPPK</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: linear-gradient(145deg, #f5f9ff 0%, #e6f0fa 100%);
            min-height: 100vh;
            padding: 30px 20px;
            color: #003366;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header con bandera a cuadros y logos */
        .header {
            background: repeating-linear-gradient(45deg, #000 0px, #000 15px, #fff 15px, #fff 30px);
            border-radius: 32px;
            padding: 8px;
            margin-bottom: 30px;
            box-shadow: 0 15px 30px -10px rgba(0,51,102,0.3);
        }

        .header-content {
            background: white;
            border-radius: 24px;
            padding: 25px 35px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 25px;
        }

        .logo-group {
            display: flex;
            align-items: center;
            gap: 25px;
            flex-wrap: wrap;
        }

        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .logo-item img {
            height: 70px;
            width: auto;
            max-width: 120px;
            object-fit: contain;
            filter: drop-shadow(0 4px 6px rgba(0,51,102,0.2));
            transition: transform 0.2s;
        }

        .logo-item img:hover {
            transform: scale(1.05);
        }

        .logo-item span {
            font-weight: 600;
            font-size: 0.85rem;
            color: #003366;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .title {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .circuit-img {
            width: 250px;
            height: auto;
            object-fit: contain;
            margin-top: 10px;
            border: none;
            border-radius: 0;
        }

        .title h1 {
            font-size: 2.4rem;
            font-weight: 800;
            color: #003366;
            line-height: 1.2;
        }

        .title p {
            font-size: 1.3rem;
            color: #336699;
            font-weight: 500;
        }

        /* Botones de filtro */
        .filters {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin: 30px 0 20px;
        }

        .filter-btn {
            background: white;
            border: 2px solid #003366;
            color: #003366;
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 60px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,51,102,0.1);
        }

        .filter-btn.active {
            background: #003366;
            color: white;
            border-color: #003366;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0,51,102,0.2);
        }

        /* Días en columna vertical */
        .days {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .day-card {
            width: 100%;
            max-width: 900px;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(4px);
            border-radius: 32px;
            padding: 25px;
            box-shadow: 0 20px 35px -8px rgba(0,51,102,0.2);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .day-title {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            padding-bottom: 15px;
            margin-bottom: 20px;
            border-bottom: 3px solid #003366;
            color: #003366;
        }

        .category {
            margin-top: 25px;
        }

        .category h3 {
            background: #003366;
            color: white;
            padding: 12px 20px;
            border-radius: 60px;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            box-shadow: 0 6px 12px rgba(0,51,102,0.2);
            display: inline-block;
        }

        .group {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 15px 0 8px 10px;
            color: #003366;
            letter-spacing: 0.5px;
        }

        .pilot-card {
            background: white;
            border-radius: 24px;
            padding: 18px;
            margin-bottom: 18px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 18px;
            border-left: 8px solid #003366;
            box-shadow: 0 6px 12px rgba(0,0,0,0.05);
            transition: all 0.25s ease;
        }

        .pilot-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 25px -8px rgba(0,51,102,0.4);
        }

        .pilot-logos {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .pilot-logos img {
            width: 70px;
            height: 70px;
            object-fit: contain;
            background: white;
            border: none;
            border-radius: 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .pilot-logos img.team-logo {
            background: black;
            border-radius: 50%;
            border: 3px solid #003366;
        }

        .pilot-info {
            flex: 1;
            min-width: 170px;
        }

        .pilot-info .name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #003366;
        }

        .pilot-info .session {
            color: #336699;
            font-weight: 500;
            margin: 4px 0;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .pilot-info .time {
            font-size: 1.2rem;
            font-weight: 600;
            background: #eef4ff;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 40px;
            border: 1px solid #003366;
        }

        .countdown {
            background: #003366;
            color: white;
            padding: 12px 18px;
            border-radius: 60px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 600;
            min-width: 150px;
            text-align: center;
            box-shadow: 0 6px 0 #001a33;
            border: 2px solid white;
        }

        .countdown.negative {
            background: #b33;
            box-shadow: 0 6px 0 #6b2b2b;
        }

        .footer {
            margin-top: 50px;
            text-align: center;
            font-weight: 600;
            color: #336699;
            border-top: 2px dashed #003366;
            padding-top: 25px;
            font-size: 1.1rem;
        }

        @media (max-width: 700px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            .logo-group {
                justify-content: center;
            }
            .pilot-card {
                flex-direction: column;
                text-align: center;
            }
            .pilot-logos {
                justify-content: center;
            }
            .countdown {
                width: 100%;
            }
            .filter-btn {
                padding: 10px 18px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <div class="header-content">
                <div class="logo-group">
                    <div class="logo-item">
                        <img src="img/actc.png" alt="ACTC">
                        <span>ACTC</span>
                    </div>
                    <div class="logo-item">
                        <img src="img/tcpk.png" alt="TCPK">
                        <span>TCPK</span>
                    </div>
                    <div class="logo-item">
                        <img src="img/tcppk.png" alt="TCPPK">
                        <span>TCPPK</span>
                    </div>
                    <div class="logo-item">
                        <img src="img/coiro.png" alt="Coiro Competición">
                        <span>Coiro Comp.</span>
                    </div>
                </div>
                <div class="title">
                    <h1>Autodromo Roberto Mouras - La Plata</h1>
                    <img src="img/La plata.png" alt="Circuito La Plata" class="circuit-img">
                    <p>20 · 21 · 22 Febrero 2026</p>
                </div>
            </div>
        </div>

        <!-- FILTROS -->
        <div class="filters" id="filterContainer">
            <button class="filter-btn active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="Gaston Mazzacane">Gaston Mazzacane</button>
            <button class="filter-btn" data-filter="Lucas Valle">Lucas Valle</button>
            <button class="filter-btn" data-filter="Nicanor Santilli Pazos">Nicanor Santilli Pazos</button>
            <button class="filter-btn" data-filter="cat:TCPK">TCPK</button>
            <button class="filter-btn" data-filter="cat:TCPPK">TCPPK</button>
        </div>

        <!-- CRONOGRAMA -->
        <div class="days" id="daysContainer"></div>

        <div class="footer">
            <i class="fas fa-clock"></i> Tiempo real hasta la salida · Equipo Coiro Competición
        </div>
    </div>

    <script>
        // FECHAS FIJAS
        const RACE_FRIDAY = new Date(2026, 1, 20);
        const RACE_SATURDAY = new Date(2026, 1, 21);
        const RACE_SUNDAY = new Date(2026, 1, 22);

        // LOGO DEL EQUIPO
        const TEAM_LOGO = 'img/coiro.png';

        // DATOS COMPLETOS
        const allScheduleData = [
             // VIERNES 20 (entrenamientos)
            { day: 'Friday', time: '15:40', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: '1er Entrenamiento' },
            { day: 'Friday', time: '16:15', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: '1er Entrenamiento' },
            { day: 'Friday', time: '16:15', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: '1er Entrenamiento' },
            { day: 'Friday', time: '17:30', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: '2er Entrenamiento' },
            { day: 'Friday', time: '18:05', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: '2er Entrenamiento' },
            { day: 'Friday', time: '18:05', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: '2er Entrenamiento' },
            // SÁBADO 21 (clasificación)
            { day: 'Saturday', time: '8:50', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: '3er Entrenamiento' },
            { day: 'Saturday', time: '09:10', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: '3er Entrenamiento' },
            { day: 'Saturday', time: '09:25', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: '3er Entrenamiento' },
            { day: 'Saturday', time: '10:30', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: 'Reunion de Pilotos' },
            { day: 'Saturday', time: '10:00', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: 'Reunion de Pilotos' },
            { day: 'Saturday', time: '10:00', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: 'Reunion de Pilotos' },
            { day: 'Saturday', time: '11:50', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: '4er Entrenamiento' },
            { day: 'Saturday', time: '12:10', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: '4er Entrenamiento' },
            { day: 'Saturday', time: '12:35', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: '4er Entrenamiento' },
            { day: 'Saturday', time: '15:30', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: 'CL1' },
            { day: 'Saturday', time: '15:46', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: 'CL2' },
            { day: 'Saturday', time: '16:00', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: 'CL3' },
            { day: 'Saturday', time: '16:14', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: 'CL1' },
            { day: 'Saturday', time: '16:30', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: 'CL2' },
            { day: 'Saturday', time: '16:44', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: 'CL3' },
            { day: 'Saturday', time: '16:14', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: 'CL1' },
            { day: 'Saturday', time: '16:30', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: 'CL2' },
            { day: 'Saturday', time: '16:44', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: 'CL3' },
            // DOMINGO
            { day: 'Sunday', time: '11:00', pilotName: 'Gaston Mazzacane', pilotLogo: 'img/mazzacane.jpg', category: 'TCPK', group: 'A', session: 'Carrera (5v)' },
            { day: 'Sunday', time: '11:30', pilotName: 'Lucas Valle', pilotLogo: 'img/valle.jpg', category: 'TCPK', group: 'B', session: 'Carrera (5v)' },
            { day: 'Sunday', time: '12:00', pilotName: 'Nicanor Santilli Pazos', pilotLogo: 'img/santilli.jpg', category: 'TCPPK', group: 'B', session: 'Carrera (5v)' }
        ];

        // Estado del filtro activo
        let activeFilter = 'all';

        // Función para filtrar datos
        function getFilteredData() {
            if (activeFilter === 'all') return allScheduleData;
            if (activeFilter.startsWith('cat:')) {
                const category = activeFilter.replace('cat:', '');
                return allScheduleData.filter(item => item.category === category);
            }
            // Filtro por nombre de piloto
            return allScheduleData.filter(item => item.pilotName === activeFilter);
        }

        // Función para obtener fecha según día
        function getDateForDay(day) {
            switch(day) {
                case 'Friday': return new Date(RACE_FRIDAY);
                case 'Saturday': return new Date(RACE_SATURDAY);
                case 'Sunday': return new Date(RACE_SUNDAY);
                default: return new Date();
            }
        }

        // Combinar día y hora
        function getTargetDate(day, timeStr) {
            const date = getDateForDay(day);
            const [hours, minutes] = timeStr.split(':').map(Number);
            return new Date(date.getFullYear(), date.getMonth(), date.getDate(), hours, minutes, 0);
        }

        // Formatear cuenta regresiva
        function formatCountdown(ms) {
            if (ms < 0) return '¡YA!';
            const totalSeconds = Math.floor(ms / 1000);
            const days = Math.floor(totalSeconds / 86400);
            const hours = Math.floor((totalSeconds % 86400) / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return `${days}d ${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
        }

        // Actualizar countdowns
        function updateAllCountdowns() {
            document.querySelectorAll('.countdown[data-target]').forEach(elem => {
                const targetStr = elem.getAttribute('data-target');
                const targetDate = new Date(targetStr);
                const now = new Date();
                const diff = targetDate - now;
                elem.textContent = formatCountdown(diff);
                elem.classList.toggle('positive', diff > 0);
                elem.classList.toggle('negative', diff <= 0);
            });
        }

        // Renderizar el cronograma según filtro
        function renderSchedule() {
            const container = document.getElementById('daysContainer');
            container.innerHTML = '';

            const filteredData = getFilteredData();
            const days = ['Friday', 'Saturday', 'Sunday'];
            const dayNames = { Friday: 'Viernes 20/02', Saturday: 'Sábado 21/02', Sunday: 'Domingo 22/02' };

            days.forEach(day => {
                const dayData = filteredData.filter(item => item.day === day);
                if (dayData.length === 0) return;

                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';

                const dayTitle = document.createElement('div');
                dayTitle.className = 'day-title';
                dayTitle.textContent = dayNames[day];
                dayCard.appendChild(dayTitle);

                // Agrupar por categoría
                const categories = {};
                dayData.forEach(item => {
                    if (!categories[item.category]) categories[item.category] = [];
                    categories[item.category].push(item);
                });

                for (const [cat, pilots] of Object.entries(categories)) {
                    const catDiv = document.createElement('div');
                    catDiv.className = 'category';
                    const catTitle = document.createElement('h3');
                    catTitle.textContent = cat;
                    catDiv.appendChild(catTitle);

                    // Agrupar por grupo
                    const groups = {};
                    pilots.forEach(p => {
                        if (!groups[p.group]) groups[p.group] = [];
                        groups[p.group].push(p);
                    });

                    for (const [group, groupPilots] of Object.entries(groups)) {
                        const groupDiv = document.createElement('div');
                        groupDiv.className = 'group';
                        groupDiv.textContent = `Grupo ${group}`;
                        catDiv.appendChild(groupDiv);

                        groupPilots.forEach(pilot => {
                            const targetDate = getTargetDate(pilot.day, pilot.time);
                            const card = document.createElement('div');
                            card.className = 'pilot-card';

                            const pilotImg = document.createElement('img');
                            pilotImg.src = pilot.pilotLogo;
                            pilotImg.alt = pilot.pilotName;

                            const teamImg = document.createElement('img');
                            teamImg.src = TEAM_LOGO;
                            teamImg.alt = 'Coiro Competición';
                            teamImg.classList.add('team-logo');

                            const logosDiv = document.createElement('div');
                            logosDiv.className = 'pilot-logos';
                            logosDiv.appendChild(pilotImg);
                            logosDiv.appendChild(teamImg);

                            const infoDiv = document.createElement('div');
                            infoDiv.className = 'pilot-info';
                            infoDiv.innerHTML = `
                                <div class="name">${pilot.pilotName}</div>
                                <div class="session">${pilot.session}</div>
                                <div class="time">${pilot.time}</div>
                            `;

                            const countdownDiv = document.createElement('div');
                            countdownDiv.className = 'countdown';
                            countdownDiv.setAttribute('data-target', targetDate.toISOString());
                            countdownDiv.textContent = formatCountdown(targetDate - new Date());

                            card.appendChild(logosDiv);
                            card.appendChild(infoDiv);
                            card.appendChild(countdownDiv);
                            catDiv.appendChild(card);
                        });
                    }
                    dayCard.appendChild(catDiv);
                }
                container.appendChild(dayCard);
            });
        }

        // Manejar clics en filtros
        function initFilters() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Actualizar clase activa
                    filterButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    // Cambiar filtro y renderizar
                    activeFilter = btn.getAttribute('data-filter');
                    renderSchedule();
                    updateAllCountdowns(); // actualizar inmediatamente
                });
            });
        }

        // Inicializar
        renderSchedule();
        updateAllCountdowns();
        setInterval(updateAllCountdowns, 1000);
        initFilters();
    </script>
</body>
</html>
